<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="/assets/images/favicon.ico" sizes="32x32">
  <link rel="icon" href="/assets/images/favicon-32x32.png" type="image/png">
  <link rel="apple-touch-icon" href="/assets/images/apple-touch-icon.png">
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'none'; script-src 'self' 'unsafe-inline' {{umami_csp}}; style-src 'self'; img-src 'self'; connect-src 'self'; base-uri 'self'; form-action 'none';">
  <title>{{title}}</title>
  <meta name="description" content="{{description}}">
  <link rel="canonical" href="{{canonical}}">

  <!-- Open Graph -->
  <meta property="og:title" content="{{og_title}}">
  <meta property="og:description" content="{{og_description}}">
  <meta property="og:url" content="{{canonical}}">
  <meta property="og:type" content="{{og_type}}">
  <meta property="og:site_name" content="{{site_title}}">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{og_title}}">
  <meta name="twitter:description" content="{{og_description}}">
  <meta property="og:image" content="{{og_image}}">
  <meta name="twitter:image" content="{{og_image}}">

  <!-- Feeds -->
  <link rel="alternate" type="application/rss+xml" title="{{site_title}} RSS" href="{{site_url}}/rss.xml">

  <!-- Theme: prevent flash -->
  <script>
  (function(){
    var t = localStorage.getItem('theme');
    if (!t) t = matchMedia('(prefers-color-scheme:dark)').matches ? 'dark' : 'light';
    document.documentElement.setAttribute('data-theme', t);
  })();
  </script>

  <!-- Styles -->
  <link rel="stylesheet" href="{{css_path}}">

  <!-- Structured Data -->
  {{json_ld}}

  <!-- Analytics (Umami) -->
  {{umami_script}}
</head>
<body>
  <a class="skip-link" href="#main-content">Skip to content</a>
  <header class="site-header">
    <div class="container">
      <nav class="site-nav" aria-label="Main navigation">
        <a href="{{root}}">Home</a>
        <a href="{{root}}about/">About</a>
        <a href="{{root}}writing/">Writing</a>
        <a href="{{root}}now/">Now</a>
      </nav>
      <button class="theme-toggle" type="button" aria-label="Switch to dark theme">&#9790;</button>
    </div>
  </header>

  <main id="main-content" class="container">
    {{content}}
  </main>

  <footer class="site-footer">
    <div class="container">
      <span>&copy; {{year}} {{author_name}}</span>
      <ul class="footer-links">
        <li><a href="/rss.xml">RSS</a></li>
        <li><a href="/sitemap.xml">Sitemap</a></li>
      </ul>
    </div>
  </footer>

  <script src="{{js_path}}" defer></script>
</body>
</html>
